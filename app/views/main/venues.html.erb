<% if @venues && @venues.count > 0 %>
<ul class="nav nav-tabs">
  <li role="presentation" class="active"><a href="#map-panel">Map</a></li>
  <li role="presentation"><a href="#list-panel">List</a></li>
</ul>
  
  <!-- <p><a href ="#" class="js-view-map">View results on a map</a></p> -->
  <div class="map-holder tab-panel">
    <div id="map">
      <script type="text/javascript">
        handler = Gmaps.build('Google');
        handler.buildMap({ provider: {}, internal: {id: 'map'}}, function (){
          markers = handler.addMarkers(<%=raw @map_markers.to_json %>);
          handler.bounds.extendWith(markers);
          handler.fitMapToBounds();
        });
      </script>
    </div>
  </div>

  <div class="tab-panel">
    <table>
      <thead>
        <th>Name</th>
        <th>Distance</th>
        <th>Number of Check-ins</th>
      </thead>
      <tbody>
        <% @venues.each do |venue| %>
          <%= render partial: 'venue', locals: { venue: venue } %>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <p>There are no coffee shops in <%= params[:postcode] %></p>
<% end %>
